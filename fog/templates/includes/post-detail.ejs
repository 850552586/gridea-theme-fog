<link rel="stylesheet" href="<%= themeConfig.domain %>/media/css/font-awesome.css%>">
<style>

</style>

<body>
    <div class="allcontent" id="postdetail">
        <div class="postshow">
            <% if (themeConfig.showFeatureImage && post.feature) { %>
            <div class="postdetailimg" style="width:100%;overflow: hidden;display: none">
                <img src="<%= post.feature%>" class="postimage" style="cursor:auto">
            </div>
            <div class="postinfo-detail">
                <div class="postdate"><i class="fa fa-calendar"></i><%= post.dateFormat %></div>
                <div class="poststatus postdate"><i class="fa fa-clock-o"></i> <%= post.stats.text %></div>
                <div class="posttag">
                    <% post.tags.forEach(function(tag) { %>
                    <a href="<%= tag.link %>" class="postlink">
                        <i class="fa fa-tag"></i> <%= tag.name %>
                    </a>
                    <% }); %>
                </div>
            </div>
            <% } else {%>
            <div class="postdetailimg" style="width:100%;overflow: hidden;display: none">
                <%if(site.customConfig.bgchoice=='default'){%>
                <img src="<%= site.customConfig['postdefaultimage'] %>" class="postimage">
                <%}else{%>
                <img src="<%= site.customConfig['postdefaultimagelink'] %>" class="postimage">
                <%}%>
            </div>
            <div class="postinfo-detail">
                <div class="postdate"><i class="fa fa-calendar"></i><%= post.dateFormat %></div>
            <div class="poststatus postdate"><i class="fa fa-clock-o"></i> <%= post.stats.text %></div>
            <div class="posttag">
                <% post.tags.forEach(function(tag) { %>
                <a href="<%= tag.link %>" class="postlink">
                    <i class="fa fa-tag"></i> <%= tag.name %>
                </a>
                <% }); %>
            </div>
        </div>
        <% } %>
        <div id="texttitle" style="text-align: center">
            <h2><%= post.title %></h2>
            <!-- id å°†ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ -->
            <div id="pl" style="display:none"><%=post.link%></div>
            <div id="rootaddr" style="display:none"><%= themeConfig.domain %></div>
            <span id="hotnum" class="leancloud_visitors" data-flag-title="<%= post.title %>">
                <h4 class="readercount">çƒ­åº¦ğŸ”¥: <i class="leancloud-visitors-count">loading...</i></h4>
            </span>
        </div>
        <div class="text ">
            <%- post.content %>
        </div>
        <% if (post.prevPost && !post.hideInList) { %>
        <div class="prev-post">
            ä¸Šä¸€ç¯‡
            <a href="<%= post.prevPost.link %>">
                <%= post.prevPost.title %>
            </a>
        </div>
        <% } %>
        <% if (post.nextPost && !post.hideInList) { %>
        <div class="next-post">
            ä¸‹ä¸€ç¯‡
            <a href="<%= post.nextPost.link %>">
                <%= post.nextPost.title %>
            </a>
        </div>
        <% } %>
    </div>
    </div>
</body>
<script>
    var t_img; // å®šæ—¶ï¿½?
    var isLoad = true; // æ§åˆ¶å˜é‡
    isImgLoad(function () {
        // åŠ è½½å®Œæˆ
        $('.postdetailimg').css("display", "block");
    });
    // åˆ¤æ–­å›¾ç‰‡åŠ è½½çš„å‡½ï¿½?
    function isImgLoad(callback) {
        // æ³¨æ„æˆ‘çš„å›¾ç‰‡ç±»åéƒ½æ˜¯coverï¼Œå› ä¸ºæˆ‘ï¿½?éœ€è¦ï¿½?ï¿½ç†coverã€‚å…¶å®ƒå›¾ç‰‡å¯ä»¥ä¸ç®¡ï¿½?
        // æŸ¥æ‰¾æ‰€æœ‰å°é¢å›¾ï¼Œè¿­ä»£ï¿½?ï¿½ç†
        $('.postdetailimg').each(function () {
            // æ‰¾åˆ°ï¿½?0å°±å°†isLoadè®¾ä¸ºfalseï¼Œå¹¶é€€å‡ºeach
            if (this.height === 0) {
                isLoad = false;
                return false;
            }
        });
        // ä¸ºtrueï¼Œæ²¡æœ‰å‘ç°ä¸º0çš„ã€‚åŠ è½½å®Œï¿½?
        if (isLoad) {
            clearTimeout(t_img); // æ¸…é™¤å®šæ—¶ï¿½?
            // å›è°ƒå‡½æ•°
            callback();
            // ä¸ºfalseï¼Œå› ä¸ºæ‰¾åˆ°äº†æ²¡æœ‰åŠ è½½å®Œæˆçš„å›¾ï¼Œå°†è°ƒç”¨å®šæ—¶å™¨é€’å½’
        } else {
            isLoad = true;
            t_img = setTimeout(function () {
                isImgLoad(callback); // é€’å½’ï¿½?ï¿½?
            }, 500); // æˆ‘è¿™é‡Œï¿½?ï¿½ç½®çš„æ˜¯500ï¿½?ç§’å°±ï¿½?æä¸€æ¬¡ï¼Œï¿½?ä»¥è‡ªå·±è°ƒï¿½?
        }
    }

    //æ–‡ç« é˜…è¯»çƒ­åº¦
    var pl = $("#pl").html();
    var rootaddr = $("#rootaddr").html();
    pl = pl.replace(rootaddr, "");
    $("#hotnum").attr('id', pl);
</script>