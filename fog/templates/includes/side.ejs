<head>
    <meta name="description" content="<%- site.customConfig.metaDescription || themeConfig.siteDescription %>" />
    <link rel="stylesheet" href="<%= themeConfig.domain %>/media/css/bootstrap.min.css%>">
</head>


<body>
    <%if(site.customConfig.menuposition=='left'){%>
    <div id=side>
        <div class="avatar-border">
            <img src="<%= themeConfig.domain %>/images/avatar.png?v=<%= site.utils.now %>" class="avatar">
        </div>
        <div class="sitename"><%=themeConfig.siteName%></div>
        <span class="describtion" data-text='["<%- themeConfig.siteDescription %>"]'>&nbsp;</span>
        <%if (site.customConfig.search){ %>
        <div class="search">
            <!-- <input type="text" class="search-input" placeholder="æ ‡é¢˜æœç´¢(â—'â—¡'â—)" /> -->
            <input type="text" class="search-input" placeholder="<%= site.customConfig['searchplaceholder'] %>">
            <div class="search-results"></div>
        </div>
        <%}%>
    <div class="share-button">
        <span>ç¤¾äº¤æŒ‰é’®</span>
        <% if (site.customConfig['github']) { %>
        <a href="<%= site.customConfig['github'] %>" target="_blank"><i><img class="icon"
                    src="<%= themeConfig.domain %>/media/images/github.png%>" alt=""></i></a>
        <% } %>
        <% if (site.customConfig['QQ']) { %>
        <a onclick="showqq()"><i><img class="icon" src="<%= themeConfig.domain %>/media/images/QQ.png%>" alt=""></i></a>
        <% } %>
        <% if (site.customConfig['zhihu']) { %>
        <a href="<%= site.customConfig['zhihu'] %>" target="_blank"><i><img class="icon"
                    src="<%= themeConfig.domain %>/media/images/zh.png%>" alt=""></i></a>
        <% } %>
        <% if (site.customConfig['bilibili']) { %>
        <a href="<%= site.customConfig['bilibili'] %>" target="_blank"><i><img class="icon"
                    src="<%= themeConfig.domain %>/media/images/bilibili.png%>" alt=""></i></a>
        <% } %>
        <% if (site.customConfig['wechat']) { %>
        <a href="<%= site.customConfig['wechat'] %>" target="_blank"><i><img class="icon"
                    src="<%= themeConfig.domain %>/media/images/wechat.png%>" alt=""></i></a>
        <% } %>
        <% if (site.customConfig['steam']) { %>
        <a href="<%= site.customConfig['steam'] %>" target="_blank"><i><img class="icon"
                    src="<%= themeConfig.domain %>/media/images/steam.png%>" alt=""></i></a>
        <% } %>
    </div>
    <div id="qq" style="display:none"><%= site.customConfig['QQ'] %></div>
    <% menus.forEach(function(menu) { %>
    <% if (menu.openType === 'External') { %>
    <div class="mchocie describtion">
        <a href="<%= menu.link %>" class="mchocie describtion" target="_blank">
            <%= menu.name %>
        </a>
    </div>
    <% } else { %>
    <div class="mchocie describtion">
        <a href="<%= menu.link %>" class="menubutton">
            <%= menu.name %>
        </a>
    </div>
    <% } %>
    <% }); %>
    <%if(site.customConfig.talkchoice){%>
    <div class="mchocie describtion">
        <a href="<%= themeConfig.domain %>/talk" class="menubutton">è¯´è¯´</a>
    </div>
    <%}%>
    <%if(site.customConfig.friendschoice){%>
    <div class="mchocie describtion">
        <a href="<%= themeConfig.domain %>/friends" class="menubutton">å‹äººå¸</a>
    </div>
    <%}%>
    <hr>
    <div id="footinfo"><%- themeConfig.footerInfo%> | Theme: <a
        href="https://github.com/850552586/gridea-theme-fog">Fog</a></div>
    <%if (site.customConfig.sitegotimeChoice){ %>
    <div id="sitegotimeDate">è½½å…¥å¤©æ•°...</div>
    <div id="sitegotimes">è½½å…¥æ—¶åˆ†ç§’...</div>
    <div id="cussitetime" style="display:none"><%= site.customConfig['sitegotime'] %></div>
    <%}%>
    <%if (site.customConfig.sitenumChoice){ %>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <div id="vistornum">
        <span id="busuanzi_container_site_uv">
            ğŸˆæ€»è®¿é—®é‡:<span id="busuanzi_value_site_pv"></span>&nbsp;&nbsp;|&nbsp;&nbsp;
            ğŸ™â€è®¿é—®äººæ•°:<span id="busuanzi_value_site_uv"></span>
        </span>
    </div>
    <div style="color:white"><%= site.customConfig.recordText %></div>
    <%}%>
    </div>


<script src="<%= themeConfig.domain %>/media/js/wordshow.js%>"></script>
    <%if (site.customConfig.sitegotimeChoice){ %>
    <script>
        //----------------------ç«™ç‚¹è¿è¡Œæ—¶é—´
        var now = new Date();

        function createtime() {
            var sitegotime = document.getElementById("cussitetime").innerHTML + " 00:00:00";
            var grt = new Date(sitegotime); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
            now.setTime(now.getTime() + 250);
            days = (now - grt) / 1000 / 60 / 60 / 24;
            dnum = Math.floor(days);
            hours = (now - grt) / 1000 / 60 / 60 - (24 * dnum);
            hnum = Math.floor(hours);
            if (String(hnum).length == 1) {
                hnum = "0" + hnum;
            }
            minutes = (now - grt) / 1000 / 60 - (24 * 60 * dnum) - (60 * hnum);
            mnum = Math.floor(minutes);
            if (String(mnum).length == 1) {
                mnum = "0" + mnum;
            }
            seconds = (now - grt) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
            snum = Math.round(seconds);
            if (String(snum).length == 1) {
                snum = "0" + snum;
            }
            document.getElementById("sitegotimeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ " + dnum + " å¤© ";
            document.getElementById("sitegotimes").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’";
        }
        setInterval("createtime()", 250);
    </script>
    <%}%>
<%}%>



    <%if(site.customConfig.menuposition=='top'){%>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <a class="navbar-brand" href="<%= themeConfig.domain %>"
                    style="font-size:21px"><%=themeConfig.siteName%>&nbsp;&nbsp;|&nbsp;&nbsp;</a>
                <a class="navbar-brand" href=""
                    style="font-size:15px;font-family:kaiti"><%- themeConfig.siteDescription %></a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse">
                <%if (site.customConfig.search){ %>
                <div class="search nav navbar-nav" style="margin-top:8px">
                    <!-- <input type="text" class="search-input" placeholder="æ ‡é¢˜æœç´¢(â—'â—¡'â—)" /> -->
                    <input type="text" class="search-input" placeholder="<%= site.customConfig['searchplaceholder'] %>">
                    <div class="search-results"></div>
                </div>
                <%}%>
                <div class="search nav navbar-nav">
                <a title="text" onclick="document.getElementById('socialMenu').style.display='block'"><i><img class="social"
                    src="<%= themeConfig.domain %>/media/images/social.png%>" alt=""></i></a>
            </div>
            <ul class="nav navbar-nav" style="float: right;margin-right:5%">
                <% menus.forEach(function(menu) { %>
                <% if (menu.openType === 'External') { %>
                <li><a href="<%= menu.link %>" target="_blank" style="color:white">
                        <%= menu.name %>
                    </a></li>
                <% } else { %>
                <li>
                    <a href="<%= menu.link %>" style="color:white">
                        <%= menu.name %>
                    </a>
                </li>
                <% } %>
                <% }); %>
                <%if(site.customConfig.talkchoice){%>
                <li><a href="<%= themeConfig.domain %>/talk" style="color:white;">è¯´è¯´</a></li>
                <%}%>
                  <%if(site.customConfig.friendschoice){%>
                <li><a href="<%= themeConfig.domain %>/friends" style="color:white">å‹é“¾</a></li>
                <%}%>
                  <li><img src="<%= themeConfig.domain %>/images/avatar.png?v=<%= site.utils.now %>" alt=""
                class="menutopavatar"></li>
            </ul>
        </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
    <div id="socialMenu" class="modal">
        <div class="animate">
            <div class="socialContainer">
                <% if (site.customConfig['github']) { %>
                <a href="<%= site.customConfig['github'] %>" target="_blank"><i><img class="icon"
                            src="<%= themeConfig.domain %>/media/images/github.png%>" alt=""></i></a>
                <% } %>
                <% if (site.customConfig['QQ']) { %>
                <a onclick="showqq()" style="cursor:pointer"><i><img class="icon" src="<%= themeConfig.domain %>/media/images/QQ.png%>"
                            alt=""></i></a>
                <% } %>
                <% if (site.customConfig['zhihu']) { %>
                <a href="<%= site.customConfig['zhihu'] %>" target="_blank"><i><img class="icon"
                            src="<%= themeConfig.domain %>/media/images/zh.png%>" alt=""></i></a>
                <% } %>
                <% if (site.customConfig['bilibili']) { %>
                <a href="<%= site.customConfig['bilibili'] %>" target="_blank"><i><img class="icon"
                            src="<%= themeConfig.domain %>/media/images/bilibili.png%>" alt=""></i></a>
                <% } %>
                <% if (site.customConfig['wechat']) { %>
                <a href="<%= site.customConfig['wechat'] %>" target="_blank"><i><img class="icon"
                            src="<%= themeConfig.domain %>/media/images/wechat.png%>" alt=""></i></a>
                <% } %>
                <% if (site.customConfig['steam']) { %>
                <a href="<%= site.customConfig['steam'] %>" target="_blank"><i><img class="icon"
                            src="<%= themeConfig.domain %>/media/images/steam.png%>" alt=""></i></a>
                <% } %>
            </div>
            <div id="qq" style="display:none"><%= site.customConfig['QQ'] %></div>
        </div>
    </div>
    <!-- å¼•å…¥jQueryæ ¸å¿ƒjsæ–‡ä»¶ -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
    <script>
        var social = document.getElementById('socialMenu');
        // é¼ æ ‡ç‚¹å‡»æ¨¡å‹å¤–åŒºåŸŸå…³é—­ç™»å½•æ¡†
        window.onclick = function (event) {
            if (event.target == social) {
                social.style.display = "none";
            }
        }
    </script>
    <%}%>
</body>
<script>
    //-------------------------------------------------æœç´¢
    // è·å–æœç´¢æ¡†ã€æœç´¢æŒ‰é’®ã€æ¸…ç©ºæœç´¢ã€ç»“æœè¾“å‡ºå¯¹åº”çš„å…ƒç´ 
    var searchInput = document.querySelector('.search-input');
    var searchResults = document.querySelector('.search-results');

    // ç”³æ˜ä¿å­˜æ–‡ç« çš„æ ‡é¢˜ã€é“¾æ¥ã€å†…å®¹çš„æ•°ç»„å˜é‡
    var searchValue = '',
        arrItems = [],
        arrLinks = [],
        arrTitles = [],
        arrResults = [],
        indexItem = [],
        itemLength = 0;
    var tmpDiv = document.createElement('div');
    tmpDiv.className = 'result-item';

    // ajax çš„å…¼å®¹å†™æ³•
    var xhr = new XMLHttpRequest() || new ActiveXObject('Microsoft.XMLHTTP');
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
            xml = xhr.responseXML;
            arrItems = xml.getElementsByTagName('entry');
            itemLength = arrItems.length;
            // éå†å¹¶ä¿å­˜æ‰€æœ‰æ–‡ç« å¯¹åº”çš„æ ‡é¢˜ã€é“¾æ¥ã€å†…å®¹åˆ°å¯¹åº”çš„æ•°ç»„ä¸­
            // åŒæ—¶è¿‡æ»¤æ‰ HTML æ ‡ç­¾
            for (i = 0; i < itemLength; i++) {
                var link = arrItems[i].getElementsByTagName('link')[0];
                arrLinks[i] = link.getAttribute("href");
                arrTitles[i] = arrItems[i].getElementsByTagName('title')[0].
                childNodes[0].nodeValue.replace(/<.*?>/g, '');
            }
        }
    }

    // å¼€å§‹è·å–æ ¹ç›®å½•ä¸‹ feed.xml æ–‡ä»¶å†…çš„æ•°æ®
    xhr.open('get', '/atom.xml', true);
    xhr.send();



    // è¾“å…¥æ¡†å†…å®¹å˜åŒ–åå°±å¼€å§‹åŒ¹é…ï¼Œå¯ä»¥ä¸ç”¨ç‚¹æŒ‰é’®
    // ç»æµ‹è¯•ï¼Œonkeydown, onchange ç­‰æ–¹æ³•æ•ˆæœä¸å¤ªç†æƒ³ï¼Œ
    // å­˜åœ¨è¾“å…¥å»¶è¿Ÿç­‰é—®é¢˜ï¼Œæœ€åå‘ç°è§¦å‘ input äº‹ä»¶æœ€ç†æƒ³ï¼Œ
    // å¹¶ä¸”å¯ä»¥å¤„ç†ä¸­æ–‡è¾“å…¥æ³•æ‹¼å†™çš„å˜åŒ–
    searchInput.oninput = function () {
        setTimeout(searchConfirm, 0);
    }
    searchInput.onfocus = function () {
        searchResults.style.display = 'block';
    }

    function searchConfirm() {
        if (searchInput.value == '') {
            searchResults.style.display = 'none';
        } else if (searchInput.value.search(/^\s+$/) >= 0) {
            // æ£€æµ‹è¾“å…¥å€¼å…¨æ˜¯ç©ºç™½çš„æƒ…å†µ
            searchInit();
            var itemDiv = tmpDiv.cloneNode(true);
            itemDiv.innerText = 'è¯·è¾“å…¥æœ‰æ•ˆå†…å®¹...';
            searchResults.appendChild(itemDiv);
        } else {
            // åˆæ³•è¾“å…¥å€¼çš„æƒ…å†µ
            searchInit();
            searchValue = searchInput.value;
            // åœ¨æ ‡é¢˜ã€å†…å®¹ä¸­æŸ¥æ‰¾
            searchMatching(arrTitles, searchValue);
        }
    }

    // æ¯æ¬¡æœç´¢å®Œæˆåçš„åˆå§‹åŒ–
    function searchInit() {
        arrResults = [];
        indexItem = [];
        searchResults.innerHTML = '';
        searchResults.style.display = 'block';
    }

    function searchMatching(arr1, input) {
        // å¿½ç•¥è¾“å…¥å¤§å°å†™
        input = new RegExp(input, 'i');
        // åœ¨æ‰€æœ‰æ–‡ç« æ ‡é¢˜ã€å†…å®¹ä¸­åŒ¹é…æŸ¥è¯¢å€¼
        for (i = 0; i < itemLength; i++) {
            if (arr1[i].search(input) !== -1) {
                var arr = arr1;
                indexItem.push(i); // ä¿å­˜åŒ¹é…å€¼çš„ç´¢å¼•
                var indexContent = arr[i].search(input);
                // æ­¤æ—¶ input ä¸º RegExp æ ¼å¼ /input/iï¼Œè½¬æ¢ä¸ºåŸ input å­—ç¬¦ä¸²é•¿åº¦
                var l = input.toString().length - 3;
                var step = 10;

                // å°†åŒ¹é…åˆ°å†…å®¹çš„åœ°æ–¹è¿›è¡Œé»„è‰²æ ‡è®°ï¼Œå¹¶åŒ…æ‹¬å‘¨å›´ä¸€å®šæ•°é‡çš„æ–‡æœ¬
                arrResults.push(arr[i].slice(indexContent - step, indexContent));
            }
        }

        // è¾“å‡ºæ€»å…±åŒ¹é…åˆ°çš„æ•°ç›®
        var totalDiv = tmpDiv.cloneNode(true);
        totalDiv.innerHTML = '<b>æ€»åŒ¹é…ï¼š' + indexItem.length + ' é¡¹<hr></b>';
        searchResults.appendChild(totalDiv);

        // æœªåŒ¹é…åˆ°å†…å®¹çš„æƒ…å†µ
        if (indexItem.length == 0) {
            var itemDiv = tmpDiv.cloneNode(true);
            itemDiv.innerText = 'æœªåŒ¹é…åˆ°å†…å®¹...';
            searchResults.appendChild(itemDiv);
        }

        // å°†æ‰€æœ‰åŒ¹é…å†…å®¹è¿›è¡Œç»„åˆ
        for (i = 0; i < arrResults.length; i++) {
            var itemDiv = tmpDiv.cloneNode(true);
            itemDiv.innerHTML = '<b>[' + arrTitles[indexItem[i]] +
                ']</b><p>' + arrResults[i] + "</p><hr />";
            itemDiv.setAttribute('onclick', 'changeHref(arrLinks[indexItem[' + i + ']])');
            searchResults.appendChild(itemDiv);
        }
    }

    function changeHref(href) {
        location.href = href;
    }

    function showqq() {
        var qq = document.getElementById("qq").innerHTML;
        if (qq != '')
            window.location.href = "tencent://message/?uin=" + qq + "&Site=&Menu=yes";
        else
            alert("åšä¸»æš‚æœªè®¾ç½®QQè”ç³»æ–¹å¼");
    }
</script>
